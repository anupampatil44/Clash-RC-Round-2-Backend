<html><head>
  <title>Leaderboard</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width= device-width, initial-scale= 1.0">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">

  {% load static %}
  <link rel="stylesheet" href="{% static '/css/LEAD.css' %}">

</head>

 <body style="background-color: #001122;">

   <nav id="navbar" class="navbar navbar-expand-sm navbar-light" >
   <a class="navbar-brand mr-0 ml-0 pb-0" href="#" style="margin-right: 0; padding: 0em;"> <img id="clashlogo" src="{% static '/img/clashwhite.png' %}" width="100" height="45" alt=""> </a>
    <span class="clock"></span>
   <a id="tc" class="nav-link justify-content-center" href="#" style="color:#fff; font-size: large;">Leaderboard</a>

    <button class="navbar-toggler bg-light"  type="button" data-toggle="collapse" data-target="#navbarTogglerDemo02" aria-controls="navbarTogglerDemo02" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
   </button>


    <div class="collapse navbar-collapse justify-content-end" id="navbarTogglerDemo02">
     <ul class="navbar-nav ml-auto">
      <li class="nav-item">
          <a id="qh" class="nav-link" href="{% url 'questionhub' %}" style="color: #fff">Question Hub</a>
      </li>
      <li class="nav-item">
          <a id="lb" class="nav-link" href="{% url 'showSubmissions' 1 %}" style="color: #fff">Submissions</a>
      </li>
      <li class="nav-item">
          <a id="lo" class="nav-link" href="{% url 'logout' %}" style="color: #fff">Logout</a>
      </li>
      <li class="nav-item "> <a class="navbar-brand" href="#"> <img src="{% static '/img/logo pisb_2.png' %}" width="100" height="30" class="d-inline-block align-top" alt="pisb logo"> </a> </li>
     </ul>
    </div>
   </nav>

  <main>
   <div class="container-fluid">
    <div class="row justify-content-center">
     <div class="col-sm-3 col-md-3 " style="height: 90vh;">
      <div class="card" style="border: black solid thin ;background-color: #003546; border-radius: 7px;height:100%;margin-right: -30px; margin-top: 1.5em;">
       <div class="card-body">
        <br>
        <br>
        <div class="avatar-circle">
         <span class="initials">{{ user_initials }}</span>
        </div>
        <div>
         <p style="font-size: medium;padding: 10px;">{{ current_user.username }}</p>
        </div>
        <div>
         <div>
          <div class="h1 font-weight-bold mb-0">
            Rank
          </div>
          <span class=" text-gray">{{ user_rank }}</span>
         </div>
         <div>
          <div class="h1 font-weight-bold mb-0">
            Score
          </div>
          <span class=" text-gray">{{ user_score }}</span>
         </div>
        </div>


        <div class="h1 font-weight-bold mb-0">
          Status
        </div>
        <div class="circle" style="padding-bottom:1em ;">
         <div class="container align-items-center d-flex justify-content-center">
          <div class="set-size charts-container ">
           <div id="progress" class="pie-wrapper">
            <span id="accuracy" class="label">{{ status }}<span class="smaller">%</span></span>
            <div class="pie">
             <div class="left-side half-circle"></div>
             <div class="right-side half-circle"></div>
            </div>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
     </div>
     <br>
     <div class="col-sm-8 col-md-8">
      <table class="table table-responsive-sm table-responsive-md " style="margin-top: 1em;">
       <thead>
        <tr style="color:white; text-align-last: center;">
         <th>RANK</th>
         <th>USERNAME</th>
         <th>Q1</th>
         <th>Q2</th>
         <th>Q3</th>
         <th>Q4</th>
         <th>Q5</th>
         <th>Q6</th>
         <th>TOTAL SCORE</th>
        </tr>
       </thead>
          <tbody>
           <tr class="rank">
       {% for content in page_obj %}
            <td>{{ forloop.counter0|add:page_obj.start_index }}</td>
            <td>{{ content.0 }}</td>
            {% for score in content.1 %}
                <td>{{ score }}</td>
            {% endfor %}
           </tr>
       {% endfor %}
       </tbody>
      </table>
      <nav aria-label="Page navigation example" style="text-align: center;  font-size: medium;">
       <ul class="pagination justify-content-center">

       {% if page_obj.has_previous %}
           <li class="page-item">
               <a class="page-link" href="?page={{ page_obj.previous_page_number }}" tabindex="-1">Previous</a>
           </li>
       {% else %}
           <li class="page-item disabled"><a aria-disabled="true">Previous</a></li>
       {% endif %}

       {% for pg_no in page_range %}
        <li class="page-item"><a class="page-link" href="?page={{ pg_no }}">{{ pg_no }}</a></li>
       {% endfor %}

       {% if page_obj.has_next %}
            <li class="page-item">
                <a class="page-link" href="?page={{ page_obj.next_page_number }}" tabindex="-1">Next</a>
            </li>
       {% else %}
           <li class="page-item disabled"><a aria-disabled="true">Next</a></li>
       {% endif %}
       </ul>
      </nav>
     </div>
    </div>
   </div>
  </main>
  <br>
  <br>
  <br>

  <footer id="footer">
   <div id="footer-content">
    <p style="font-size: large;"><span>Â©</span>PICT IEEE Student Branch</p>
   </div>
  </footer>
   <script>

  let accuracy0 = document.querySelector('#accuracy').textContent;
  let progress0 = document.querySelector('#progress');

  accuracy0 = parseInt(accuracy0.substring(0, accuracy0.length -1))


  if (0<accuracy0 && accuracy0<=10) {
    progress0.classList.add('progress-10');
  }
  else if (10<accuracy0 && accuracy0<=20)
  {
    progress0.classList.add('progress-20');
  }
  else if (20<accuracy0 && accuracy0<=30 && accuracy0!=25)
  {
    progress0.classList.add('progress-30');
  }
  else if (accuracy0==25)
  {
    progress0.classList.add('progress-25');
  }
  else if (30<accuracy0 && accuracy0<=40)
  {
    progress0.classList.add('progress-40');
  }
  else if (40<accuracy0 && accuracy0<=50)
  {
    progress0.classList.add('progress-50');
  }
  else if(50<accuracy0 && accuracy0<=60)
  {
    progress0.classList.add('progress-60');
  }
  else if(60<accuracy0 && accuracy0<=70)
  {
    progress0.classList.add('progress-70');
  }
  else if(70<accuracy0 && accuracy0<=80 && accuracy0!=75)
  {
    progress0.classList.add('progress-80');
  }
  else if(accuracy0==75)
  {
    progress0.classList.add('progress-75');
  }
  else if(80<accuracy0 && accuracy0<=90)
  {
    progress0.classList.add('progress-90');
  }
  else if(accuracy0>=90 && accuracy0<100)
  {
      progress0.classList.add('progress-90');
  }
  else if(accuracy0==100)
  {
      progress0.classList.add('progress-100');
  }

   </script>

 <script>
    var Clock = (function(){
      var exports = function(element) {
        this._element = element;
        var html = '';
        for (var i=0;i<6;i++) {
          html += '<span>&nbsp;</span>';
        }
        this._element.innerHTML = html;
        this._slots = this._element.getElementsByTagName('span');
        this._tick();
      };
      exports.prototype = {
        _tick:function() {
          var time = new Date();
          this._update(this._pad(time.getHours()) + this._pad(time.getMinutes()) + this._pad(time.getSeconds()));
          var self = this;
          setTimeout(function(){
            self._tick();
          },1000);
        },
        _pad:function(value) {
          return ('0' + value).slice(-2);
        },
        _update:function(timeString) {
          var i=0,l=this._slots.length,value,slot,now;
          for (;i<l;i++) {
            value = timeString.charAt(i);
            slot = this._slots[i];
            now = slot.dataset.now;
            if (!now) {
              slot.dataset.now = value;
              slot.dataset.old = value;
              continue;
            }
            if (now !== value) {
              this._flip(slot,value);
            }
          }
        },
        _flip:function(slot,value) {
          slot.classList.remove('flip');
          slot.dataset.old = slot.dataset.now;
          slot.dataset.now = value;
          slot.offsetLeft;
          slot.classList.add('flip');
        }
      };
      return exports;
    }());
    var i=0,clocks = document.querySelectorAll('.clock'),l=clocks.length;
    for (;i<l;i++) {
      new Clock(clocks[i]);
    }
  </script>

</body></html>